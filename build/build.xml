<?xml version="1.0" encoding="UTF-8"?>
<project name="OOB" default="build" basedir="../">

    <!-- Additional Ant libraries -->

    <taskdef resource="net/sf/antcontrib/antlib.xml">
        <classpath>
            <pathelement location="${basedir}/build/lib/ant/ant-contrib-1.0b3.jar"/>
        </classpath>
    </taskdef>

    <!-- YUI Compressor ant task from http://javaflight.blogspot.com/2008/01/introducing-yui-compressor-ant-task.html -->
    <taskdef name='yui-compressor' classname="net.noha.tools.ant.yuicompressor.tasks.YuiCompressorTask">
        <classpath>
            <pathelement location="${basedir}/build/lib/ant/yui-compressor-ant-task-0.5/binyui/yui-compressor-ant-task-0.5.jar"/>
            <pathelement location="${basedir}/build/lib/ant/yui-compressor-ant-task-0.5/lib/yuicompressor-2.4.7.jar"/>
        </classpath>
    </taskdef>

    <target name="build">
        <antcall target="jshint"/>
    </target>


    <!-- jshint stuff -->
    <target name="jshintFileset">
        <exec dir="${basedir}/build/lib/jshint" executable="java" failonerror="true">
        <arg line="-jar ../rhino/js.jar ./env/jshint-rhino.js '${jshintFileset}' 'jquery=true,node=true,forin=true,evil=false,laxbreak=false,plusplus=false,undef=true,bitwise=true,curly=true,debug=false,onevar=true,browser=true,undef=true,eqeqeq=true,regexp=true,newcap=true' "/>
        </exec>
    </target>

    <target name="jshint">
        <!-- jshint app specific files -->
        <pathconvert pathsep=" " property="jsAppFiles">
            <fileset dir="${basedir}" includes="**.js"/>
        </pathconvert>

        <antcall target="jshintFileset">
            <param name="jshintFileset" value="${jsAppFiles}"/>
        </antcall>
    </target>
</project>
